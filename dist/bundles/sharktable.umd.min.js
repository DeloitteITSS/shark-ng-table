!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common"),require("@angular/router"),require("@angular/forms"),require("rxjs/Observable"),require("rxjs/Subject")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@angular/router","@angular/forms","rxjs/Observable","rxjs/Subject"],e):e((t.ng=t.ng||{},t.ng.sharktable={}),t.ng.core,t.ng.common,t.ng.router,t.ng.forms,t.Rx,t.Rx)}(this,function(c,n,e,r,o,i,a){"use strict";var t,s=function(){function t(){}return t.prototype.exportRow=function(n,r,o){var i=this,a={};return Object.keys(n).forEach(function(e){var t=r.filter(function(t){return t.displayed}).find(function(t){return t.property===e});t&&(a[e]=i.retrieveCell(n,t,o))}),a},t.prototype.retrieveCell=function(t,e,n){void 0===n&&(n=!0);var r=this.findValue(t,e.property);return e.pipe&&n?this.applyPipe(e.pipe,r,e.pipeArgs,e.pipeConstructorArgs):r},t.prototype.applyPipe=function(t,e,n,r){var o=new(t.bind.apply(t,[void 0].concat(r)));return o.transform.apply(o,[e].concat(n))},t.prototype.filter=function(t,l,c,p){var u=this;return t.filter(function(n){var r=!1;if(c&&u.hasFilter(l)){for(var t=!1,e=0,o=l;e<o.length;e++){var i=o[e],a=u.retrieveCell(n,i)+"",s=i.filter?i.filter:"";if(0<s.length){if(!a||-1===a.toLowerCase().indexOf(s.toLowerCase())){t=!1;break}t=!0}}r=t}else{if(c&&!u.hasFilter(l))return!0;p&&l.forEach(function(t){var e=u.retrieveCell(n,t)+"";p&&e&&-1!==e.toLowerCase().indexOf(p.toLowerCase())&&(r=!0)})}return r})},t.prototype.findValue=function(t,e){for(var n=e.split(".");n.length&&(t=t[n.shift()]););return t},t.prototype.hasFilter=function(t){return 0<t.filter(function(t){return t.filter&&0<t.filter.length}).length},t.decorators=[{type:n.Injectable}],t.ctorParameters=function(){return[]},t}(),l=function(){function t(t){this.viewContainerRef=t}return t.decorators=[{type:n.Directive,args:[{selector:"[sharkDynamicContents]"}]}],t.ctorParameters=function(){return[{type:n.ViewContainerRef}]},t}(),p=function(){function t(t,e,n){this.tableUtils=t,this.componentFactoryResolver=e,this.changeDetectorRef=n}return t.prototype.ngAfterViewInit=function(){this.loadComponent()},t.prototype.ngOnChanges=function(t){t.hasOwnProperty("openChildren")&&!t.openChildren.isFirstChange()&&(this.childOpen=-1<t.openChildren.currentValue.indexOf(this.rowIndex),this.componentRef.instance.childOpen(this.childOpen))},t.prototype.loadComponent=function(){var t=this.componentFactoryResolver.resolveComponentFactory(this.component),e=this.childContentsDirective.viewContainerRef;e.clear(),this.componentRef=e.createComponent(t),this.componentRef.instance.data=this.row,this.changeDetectorRef.detectChanges()},t.decorators=[{type:n.Component,args:[{selector:"shark-child",template:"\n      <ng-template sharkDynamicContents></ng-template>\n  "}]}],t.ctorParameters=function(){return[{type:s},{type:n.ComponentFactoryResolver},{type:n.ChangeDetectorRef}]},t.propDecorators={component:[{type:n.Input}],row:[{type:n.Input}],rowIndex:[{type:n.Input}],openChildren:[{type:n.Input}],childContentsDirective:[{type:n.ViewChild,args:[l]}]},t}();(t=c.SharkSortType||(c.SharkSortType={}))[t.NONE=0]="NONE",t[t.ASC=1]="ASC",t[t.DESC=2]="DESC";var u=function(){},h=function(){function t(t){this.elementRef=t,this.pageCount=[],this.first=!1,this.last=!1,this.previous=!1,this.next=!1,this.displayedPages=[],this.paginationChange=new n.EventEmitter}return t.prototype.ngOnChanges=function(t){var e=this;t.hasOwnProperty("page")&&this.page&&(this.pageCount=Array.from(Array(this.page.totalPages),function(t,e){return e}),this.first=0===this.page.number,this.last=this.page.number===this.pageCount.length-1,this.previous=!this.first,this.next=!this.last,3<this.pageCount.length?this.first?this.displayedPages=[0,1,2]:this.last?this.displayedPages=[this.page.number-2,this.page.number-1,this.page.number]:this.displayedPages=[this.page.number-1,this.page.number,this.page.number+1]:this.displayedPages=this.pageCount,this.lastButton&&setTimeout(function(){if(!e.elementRef.nativeElement.ownerDocument.getElementById(e.lastButton)){var t=e.elementRef.nativeElement.ownerDocument.getElementById("active-button");t&&t.focus()}e.lastButton=void 0},100))},t.prototype.changePage=function(t){this.lastButton=this.elementRef.nativeElement.ownerDocument.activeElement.id,this.paginationChange.emit(t)},t.decorators=[{type:n.Component,args:[{selector:"shark-table-pagination",template:'\n      <div class="pagination-wrapper" *ngIf="pageCount.length > 1">\n          <div class="pagination">\n              <button id="first-page-button" *ngIf="!first" (click)="changePage(0)" type="button" class="fa fa-angle-double-left">\n                <span class="screen-reader-button-label">First Page</span>\n              </button>\n              <button id="previous-page-button" *ngIf="previous" (click)="changePage(page.number - 1)" type="button" class="fa fa-angle-left">\n                <span class="screen-reader-button-label">Previous Page</span>\n              </button>\n            \n              <ng-container *ngFor="let num of displayedPages">\n                <button \n                  [attr.id]="num === page.number ? \'active-button\' : null"\n                  [ngClass]="{\'active\': num === page.number, \'inactive\': num!== page.number }"\n                  [attr.aria-current]="num === page.number ? \'true\' : null"\n                  [attr.aria-disabled]="num === page.number ? \'true\' : null"\n                  (click)="changePage(num)" type="button">\n                  <span class="screen-reader-button-label">Page</span>\n                  {{ num + 1 }}\n                </button>\n              </ng-container>\n            \n              <button id="next-page-button" *ngIf="next" (click)="changePage(page.number + 1)" type="button" class="fa fa-angle-right">\n                <span class="screen-reader-button-label">Next Page</span>\n              </button>\n              <button id="last-page-button" *ngIf="!last" (click)="changePage(pageCount.length - 1)" type="button" class="fa fa-angle-double-right">\n                <span class="screen-reader-button-label">Last Page</span>\n              </button>\n          </div>\n      </div>\n  '}]}],t.ctorParameters=function(){return[{type:n.ElementRef}]},t.propDecorators={page:[{type:n.Input}],paginationChange:[{type:n.Output}]},t}(),g=function(){function t(t){this.document=t,this.sortChange=new n.EventEmitter,this.filterChange=new n.EventEmitter,this.columnChange=new n.EventEmitter}return t.prototype.dispatchSortChangeEvent=function(t){this.sortChange.emit(t)},t.prototype.fireFilterChange=function(){this.filterChange.emit({columns:this.columns,filter:this.filter,localPagingSize:this.localPagingSize})},t.prototype.moveColumnForward=function(t,e){var n=this;this.move(t,1),this.notifierService.postMessage("column moved right");var r=this.columns.indexOf(e);setTimeout(function(){r===n.columns.length-1?n.focusButton(e,"left"):n.focusButton(e,"right")},100)},t.prototype.moveColumnBackward=function(t,e){var n=this;this.move(t,-1),this.notifierService.postMessage("column moved left");var r=this.columns.indexOf(e);setTimeout(function(){0===r?n.focusButton(e,"right"):n.focusButton(e,"left")},100)},t.prototype.focusButton=function(t,e){var n=document.getElementById(t.property+"-"+e);n&&n.focus()},t.prototype.move=function(t,e){var n=t+e;if(-1<n&&n<this.columns.length){var r=this.columns.splice(t,1)[0];this.columns.splice(n,0,r)}},t.decorators=[{type:n.Component,args:[{selector:"[shark-table-header]",template:'\n        <tr class="header-row header-border" *ngIf="columns.length > 0">\n            <th id="childHeader" *ngIf="childRows" class="child-spacer">\n              <span class="screen-reader">Details</span>\n            </th>\n            <th class="header-buttons" [ngClass]="{\'right\': column.alignRight }" scope="col"\n                *ngFor="let column of columns; let i = index; let f = first; let l = last;"\n                [attr.id]="column.property"\n                [attr.aria-sort]="(!sortable || column.unsortable) ? null : (!column.sortType || column.sortType === 0) ? \'none\' : column.sortType === 1 ? \'ascending\' : \'descending\'">\n                <button *ngIf="columnOrdering && !f" (click)="moveColumnBackward(i, column)" type="button" class="ordering-button fa fa-angle-left" [id]="column.property + \'-left\'">\n                  <span class="screen-reader-button-label">{{ \'Move the \' + column.header + \' column left\' }}</span>\n                </button>\n                <shark-table-header-button *ngIf="sortable && !column.unsortable" [column]="column" (sortChange)="dispatchSortChangeEvent($event)"></shark-table-header-button>\n                <ng-container *ngIf="!sortable || column.unsortable">\n                  {{ column.header }}\n                </ng-container>\n                <button *ngIf="columnOrdering && !l" (click)="moveColumnForward(i, column)" type="button" class="ordering-button fa fa-angle-right" [id]="column.property + \'-right\'">\n                  <span class="screen-reader-button-label">{{ \'Move the \' + column.header + \' column right\' }}</span>\n                </button>\n                <div *ngIf="columnFiltering && filterable">\n                  <label [for]="\'column-\' + i" class="screen-reader">{{ column.header }} filter</label>\n                  <input type="text" name="column{{i}}" [id]="\'column-\' + i" [(ngModel)]="column.filter" (ngModelChange)="fireFilterChange()" [attr.placeholder]="showFilterPlaceholders ? (column.header + \' filter\') : null" />\n                </div>\n            </th>\n        </tr>\n    '}]}],t.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.Inject,args:[e.DOCUMENT]}]}]},t.propDecorators={sortable:[{type:n.Input}],columns:[{type:n.Input}],columnOrdering:[{type:n.Input}],childRows:[{type:n.Input}],page:[{type:n.Input}],filterable:[{type:n.Input}],columnFiltering:[{type:n.Input}],filter:[{type:n.Input}],showFilterPlaceholders:[{type:n.Input}],notifierService:[{type:n.Input}],localPagingSize:[{type:n.Input}],sortChange:[{type:n.Output}],filterChange:[{type:n.Output}],columnChange:[{type:n.Output}]},t}(),f=function(){function t(t){this.tableUtils=t,this.start=0,this.end=0,this.total=0,this.filtered=!1,this.currentPageInfo="",this.filterChange=new n.EventEmitter,this.paginationChange=new n.EventEmitter}return t.prototype.ngOnChanges=function(t){this.total=this.page.totalElements;var e=this.page.size?this.page.size:this.page.numberOfElements,n=this.page.number*e+1;n>this.total?this.start=0:this.start=n;var r=this.page.number*e+this.page.numberOfElements;r>this.total?this.end=this.total:this.end=r;var o=this.filtered;this.filtered=this.filter&&0<this.filter.length||this.tableUtils.hasFilter(this.columns),this.currentPageInfo=this.start+" - "+this.end+" of "+this.total+(this.filtered?" (filtered)":"");var i=this.start+" to "+this.end+" of "+this.total+(this.filtered?" (filtered)":"");if(t.hasOwnProperty("page")&&!t.page.isFirstChange()){var a=t.page;a.previousValue.number!==a.currentValue.number?this.notifierService.postMessage("Page changed to "+(a.currentValue.number+1)+" showing "+i):(this.filtered||o)&&this.notifierService.postMessage("Filtering changed, showing "+i)}if(t.hasOwnProperty("filter")){var s=t.filter;s.previousValue!==s.currentValue&&this.notifierService.postMessage("Filtering changed, showing "+i)}},t.prototype.firePageSizeChange=function(){this.filterChange.emit({columns:this.columns,filter:this.filter,localPagingSize:this.localPagingSize}),this.notifierService.postMessage("Page size changed to "+this.localPagingSize+", page changed to "+(this.page.number+1))},t.prototype.changePage=function(t){this.paginationChange.emit(t)},t.decorators=[{type:n.Component,args:[{selector:"shark-table-footer",template:'\n  <div class="info-footer">\n    <div class="page-size-controls" *ngIf="localPaging && showLocalPagingOptions && columns.length > 0">\n      <label for="local-paging-size" class="local-paging-options">\n        Rows per page:\n      </label>\n      <select [(ngModel)]="localPagingSize" (change)="firePageSizeChange()" name="localPagingSize" id="local-paging-size">\n        <option *ngFor="let option of localPagingOptions" [value]="option" [attr.selected]="option === localPagingSize ? \'selected\' : null">{{ option }}</option>\n      </select>\n      <span>{{ currentPageInfo }}</span>\n    </div>\n    <shark-table-pagination *ngIf="columns.length > 0" [page]="page" (paginationChange)="changePage($event)"></shark-table-pagination>\n  </div>'}]}],t.ctorParameters=function(){return[{type:s}]},t.propDecorators={paginationComponent:[{type:n.ViewChild,args:[h]}],notifierService:[{type:n.Input}],localPaging:[{type:n.Input}],localPagingSize:[{type:n.Input}],localPagingOptions:[{type:n.Input}],showLocalPagingOptions:[{type:n.Input}],page:[{type:n.Input}],columns:[{type:n.Input}],filter:[{type:n.Input}],filterChange:[{type:n.Output}],paginationChange:[{type:n.Output}]},t}(),m=function(){function t(t){this.elementRef=t,this.columnChange=new n.EventEmitter,this.showDropDown=!1}return t.prototype.closeDropDownWithEscape=function(){this.showDropDown&&(this.showDropDown=!1,this.dropdownButton.nativeElement.focus())},t.prototype.closeDropDown=function(t){this.elementRef.nativeElement.contains(t.target)||(this.showDropDown=!1)},t.prototype.emitSelected=function(){this.columnChange.emit(this.columns)},t.decorators=[{type:n.Component,args:[{selector:"shark-column-dropdown",template:'\n    <span class="column-picker">\n        <button class="toggle-dropdown" (click)="showDropDown = !showDropDown" [attr.aria-expanded]="showDropDown" aria-controls="column-picker-dropdown" type="button" #dropdownButton>\n          <span>Choose Columns<i class="fa fa-fw fa-angle-down"></i></span>\n        </button>\n        <div id="column-picker-dropdown" class="dropdown" [attr.aria-hidden]="!showDropDown" aria-label="submenu" [ngStyle]="{\'display\': showDropDown ? \'block\': \'none\'}">\n          <fieldset>\n            <legend class="screen-reader">Columns to display</legend>\n            <label *ngFor="let column of columns">\n              <input type="checkbox" [(ngModel)]="column.displayed" (ngModelChange)="emitSelected(column)" />\n              {{ column.header }}\n            </label>\n          </fieldset>\n        </div>\n    </span>\n  '}]}],t.ctorParameters=function(){return[{type:n.ElementRef}]},t.propDecorators={dropdownButton:[{type:n.ViewChild,args:["dropdownButton"]}],columns:[{type:n.Input}],notifierService:[{type:n.Input}],columnChange:[{type:n.Output}],closeDropDownWithEscape:[{type:n.HostListener,args:["document:keydown.escape",[]]}],closeDropDown:[{type:n.HostListener,args:["document:click",["$event"]]},{type:n.HostListener,args:["document:touchstart",["$event"]]}]},t}(),d=function(){function t(){this.filterChange=new n.EventEmitter,this.columnChange=new n.EventEmitter}return t.prototype.fireFilterChange=function(){this.filterChange.emit({columns:this.columns,filter:this.filter,localPagingSize:this.localPagingSize})},t.prototype.fireColumnChange=function(t){this.columnChange.emit(t)},t.decorators=[{type:n.Component,args:[{selector:"shark-table-info-header",template:'\n    <div class="info-header">\n      <div class="controls header-buttons">\n        <button class="server-refresh fa fa-sync" *ngIf="serverSideData" (click)="fireFilterChange()" type="button">\n          <span class="screen-reader-button-label">Refresh Server Data</span>\n        </button>\n        <shark-column-dropdown *ngIf="columnPicker" [columns]="allColumns" [notifierService]="notifierService" (columnChange)="fireColumnChange($event)"></shark-column-dropdown>\n        <span class="filter-box" *ngIf="filterable && !columnFiltering && columns.length > 0">\n          <label for="filter" class="screen-reader">Filter Results (all column search)</label>\n          <input #filterInput type="text" name="filter" id="filter" [(ngModel)]="filter" (ngModelChange)="fireFilterChange()" [attr.placeholder]="showFilterPlaceholders ? \'Filter Results\' : null" />\n        </span>\n      </div>\n    </div>\n  '}]}],t.ctorParameters=function(){return[]},t.propDecorators={columnPickerComponent:[{type:n.ViewChild,args:[m]}],filterInput:[{type:n.ViewChild,args:["filterInput"]}],columns:[{type:n.Input}],allColumns:[{type:n.Input}],columnPicker:[{type:n.Input}],serverSideData:[{type:n.Input}],filterable:[{type:n.Input}],columnFiltering:[{type:n.Input}],filter:[{type:n.Input}],showFilterPlaceholders:[{type:n.Input}],localPagingSize:[{type:n.Input}],notifierService:[{type:n.Input}],filterChange:[{type:n.Output}],columnChange:[{type:n.Output}]},t}(),y=function(){function t(){this.messageSubject=new a.Subject,this.messageObservable=this.messageSubject.asObservable()}return t.prototype.postMessage=function(t){this.messageSubject.next(t)},t}(),b=function(){function t(t,e){this.router=t,this.tableUtils=e,this.notifierService=new y,this.currentColumns=[],this.caption="A Data Table",this.hideCaption=!1,this.columnPicker=!1,this.columnOrdering=!1,this.sortable=!0,this.filterable=!0,this.columnFiltering=!1,this.localFilter=!0,this.showFilterPlaceholders=!0,this.localPaging=!0,this.localPagingSize=10,this.localPagingOptions=[10,20,100],this.showLocalPagingOptions=!0,this.serverSideData=!1,this.rowStylingFunction=function(t){return{}},this.childRows=!1,this.pageChange=new n.EventEmitter,this.footer=!0,this.tableEmptyMessage="This table contains no rows"}return t.prototype.ngOnInit=function(){this.updatePage()},t.prototype.ngOnChanges=function(t){var e=t.data,n=t.columns;n&&n.isFirstChange()&&(this.columns=n.currentValue,this.columns.forEach(function(t){return t.displayed=!0}),this.currentColumns=this.columns),e&&!e.isFirstChange()?this.updatePage():n&&!n.isFirstChange()&&(this.currentColumns=n.currentValue,this.emitCurrent())},t.prototype.ngOnDestroy=function(){this.dataSubscription&&this.dataSubscription.unsubscribe(),this.localSubscription&&this.localSubscription.unsubscribe()},t.prototype.updateCurrentColumns=function(t){this.currentColumns=t.filter(function(t){return t.displayed}),this.emitCurrent()},t.prototype.emitCurrent=function(){this.pageChange.emit({pageNo:this.page.number,columns:this.currentColumns,sortString:this.generateSortString(),sorts:this.generateSortArray(),filter:this.filter})},t.prototype.headerChange=function(t){this.columns=t.columns,this.currentColumns=this.columns.filter(function(t){return t.displayed}),this.filter=t.filter,this.localPagingSize=t.localPagingSize,this.emitCurrent()},t.prototype.changePage=function(t){this.pageChange.emit({pageNo:t,columns:this.currentColumns,sortString:this.generateSortString(),sorts:this.generateSortArray(),filter:this.filter})},t.prototype.changeSort=function(e,n){var r=this;if(this.sortable){this.currentColumns.forEach(function(t){if(t.property===e){switch(n){case c.SharkSortType.ASC:t.sortType=c.SharkSortType.DESC;break;case c.SharkSortType.DESC:t.sortType=c.SharkSortType.NONE;break;case c.SharkSortType.NONE:default:t.sortType=c.SharkSortType.ASC}r.notifierService.postMessage(t.sortType===c.SharkSortType.DESC?"sorted descending":t.sortType===c.SharkSortType.ASC?"sorted ascending":"unsorted")}});var t=this.generateSortArray();this.serverSideData||this.sort(this.page.content,t),this.pageChange.emit({pageNo:this.page.number,columns:this.currentColumns,sortString:this.generateSortString(),sorts:t,filter:this.filter})}},t.prototype.exportCurrentData=function(e){var t,n=this;return void 0===e&&(e=!0),this.localFilter&&(this.columnFiltering&&this.tableUtils.hasFilter(this.currentColumns)||this.filter&&0<this.filter.length)?(t=this.tableUtils.filter(this.data,this.currentColumns,this.columnFiltering,this.filter),this.sort(t,this.generateSortArray())):t=this.data,0===this.currentColumns.length?{data:[],columns:[]}:{data:t.map(function(t){return n.tableUtils.exportRow(t,n.currentColumns,e)}),columns:this.currentColumns}},t.prototype.generateSortString=function(){var e="";return this.currentColumns.forEach(function(t){switch(t.sortType){case c.SharkSortType.ASC:e+=t.property+";";break;case c.SharkSortType.DESC:e+="-"+t.property+";";break;case c.SharkSortType.NONE:}}),e},t.prototype.generateSortArray=function(){var e=[];return this.currentColumns.forEach(function(t){switch(t.sortType){case c.SharkSortType.ASC:case c.SharkSortType.DESC:e.push({property:t.property,sortType:t.sortType})}}),e},t.prototype.sort=function(t,e){var s=this,l={};this.columns.forEach(function(t){return l[t.property]=t}),t.sort(function(o,i){var a=0;return e.forEach(function(t){if(0===a){var e=s.tableUtils.findValue(o,t.property),n=s.tableUtils.findValue(i,t.property),r=l[t.property].ascendingSortFunction;a=r?r(e,n):isNaN(Number(e))||isNaN(Number(n))?e<n?-1:n<e?1:0:e-n,a*=t.sortType===c.SharkSortType.DESC?-1:1}}),a})},t.prototype.updatePage=function(){this.data&&(this.data.constructor===Array?this.setupPageArray():this.data.constructor===i.Observable?this.setupPageSubscription():(this.page=this.data,this.page.number||(this.page.number=0)),this.setupInitialSort())},t.prototype.createLocalPage=function(t){var e=(t||this.data).length;return{number:0,totalPages:1,totalElements:e,first:!0,last:!0,numberOfElements:e,content:t||this.data}},t.prototype.setupPageArray=function(){var e=this;if(this.localPaging){var t=this.data.length,n=Math.ceil(t/this.localPagingSize);this.page={number:0,totalPages:n,totalElements:t,first:!0,last:!1,numberOfElements:this.localPagingSize,content:this.data.slice(0,this.localPagingSize)},this.localSubscription&&this.localSubscription.unsubscribe(),this.localSubscription=this.pageChange.subscribe(function(t){return e.calculateLocalPage(t)})}else this.localFilter?(this.page=this.createLocalPage(),this.localSubscription&&this.localSubscription.unsubscribe(),this.localSubscription=this.pageChange.subscribe(function(t){return e.calculateLocalPageNoPagination(t)})):this.page=this.createLocalPage()},t.prototype.calculateLocalPageNoPagination=function(t){if(t.filter&&0<t.filter.length||this.tableUtils.hasFilter(t.columns)){var e=this.tableUtils.filter(this.data,this.currentColumns,this.columnFiltering,t.filter);this.page={number:0,totalPages:1,totalElements:e.length,first:!0,last:!1,numberOfElements:e.length,content:e}}else this.page=this.createLocalPage()},t.prototype.calculateLocalPage=function(t){var e;e=this.localFilter&&t.filter&&0<t.filter.length||this.tableUtils.hasFilter(t.columns)?this.tableUtils.filter(this.data,this.currentColumns,this.columnFiltering,t.filter):this.data,this.sort(e,this.generateSortArray());var n=e.length,r=1*(this.localPagingSize>e.length?e.length:this.localPagingSize),o=0===n?0:Math.ceil(n/r),i=t.pageNo>o||e.length<=r?0:t.pageNo,a=r*i+r,s=e.slice(r*i,a);this.page={number:i,totalPages:o,totalElements:n,first:0===i,last:i===o,numberOfElements:r,content:s}},t.prototype.setupPageSubscription=function(){var e=this;this.dataSubscription&&this.dataSubscription.unsubscribe(),this.dataSubscription=this.data.subscribe(function(t){t.constructor===Array?e.page=e.createLocalPage(t):e.page=t})},t.prototype.setupInitialSort=function(){var t=this;this.initialSort&&(this.initialSort.split(";").forEach(function(r){t.columns.forEach(function(t){var e=c.SharkSortType.NONE,n=r;r.startsWith("-")?(e=c.SharkSortType.DESC,n=n.substr(1)):e=c.SharkSortType.ASC,n===t.property&&(t.sortType=e)})}),this.changeSort("",void 0));this.page.sorts&&0<this.page.sorts.length&&(this.columns.forEach(function(e){t.page.sorts.forEach(function(t){e.property===t.property&&(e.sortType=c.SharkSortType.NONE,t.ascending?e.sortType=c.SharkSortType.ASC:t.descending&&(e.sortType=c.SharkSortType.DESC))})}),this.serverSideData||this.changeSort("",void 0))},t.decorators=[{type:n.Component,args:[{selector:"shark-table",template:'\n      <shark-table-aria-notifier [notifierService]="notifierService"></shark-table-aria-notifier>\n      <div class="table-wrapper" *ngIf="page">\n        <shark-table-info-header *ngIf="(serverSideData || (filterable && !columnFiltering) || columnPicker)"\n                                 [serverSideData]="serverSideData"\n                                 [filterable]="filterable"\n                                 [columnFiltering]="columnFiltering"\n                                 [columnPicker]="columnPicker"\n                                 [columns]="currentColumns"\n                                 [allColumns]="columns"\n                                 [filter]="filter"\n                                 [showFilterPlaceholders]="showFilterPlaceholders"\n                                 [localPagingSize]="localPagingSize"\n                                 [notifierService]="notifierService"\n                                 (filterChange)="headerChange($event)"\n                                 (columnChange)="updateCurrentColumns($event)"\n        ></shark-table-info-header>\n        <table>\n            <caption [ngClass]="{\'screen-reader\': hideCaption}">{{ caption }}</caption>\n            <thead shark-table-header\n                   [sortable]="sortable"\n                   [columns]="currentColumns"\n                   [columnOrdering]="columnOrdering"\n                   [childRows]="childRows"\n                   [page]="page"\n                   [filterable]="filterable"\n                   [columnFiltering]="columnFiltering"\n                   [localPagingSize]="localPagingSize"\n                   [filter]="filter"\n                   [showFilterPlaceholders]="showFilterPlaceholders"\n                   [notifierService]="notifierService"\n                   (sortChange)="changeSort($event.property, $event.sortType)"\n                   (filterChange)="headerChange($event)"\n                   (columnChange)="updateCurrentColumns($event)"\n            ></thead>\n            <tbody shark-table-body\n                   [currentColumns]="currentColumns"\n                   [columns]="columns"\n                   [localFilter]="localFilter"\n                   [localPaging]="localPaging"\n                   [columnFiltering]="columnFiltering"\n                   [filter]="filter"\n                   [childRows]="childRows"\n                   [childComponent]="childComponent"\n                   [linkTarget]="linkTarget" [linkKey]="linkKey"\n                   [page]="page"\n                   [tableEmptyMessage]="tableEmptyMessage"\n                   [rowStylingFunction]="rowStylingFunction"\n                   [cellStylingFunction]="cellStylingFunction"\n            ></tbody>\n        </table>\n        <shark-table-footer *ngIf="footer && currentColumns.length > 0"\n                            [page]="page"\n                            [columns]="currentColumns"\n                            [filter]="filter"\n                            [localPaging]="localPaging"\n                            [localPagingSize]="localPagingSize"\n                            [localPagingOptions]="localPagingOptions"\n                            [showLocalPagingOptions]="showLocalPagingOptions"\n                            [notifierService]="notifierService"\n                            (filterChange)="headerChange($event)"\n                            (paginationChange)="changePage($event)"\n        ></shark-table-footer>\n      </div>\n  '}]}],t.ctorParameters=function(){return[{type:r.Router},{type:s}]},t.propDecorators={headerInfoComponent:[{type:n.ViewChild,args:[d]}],headerComponent:[{type:n.ViewChild,args:[g]}],footerComponent:[{type:n.ViewChild,args:[f]}],data:[{type:n.Input}],columns:[{type:n.Input}],caption:[{type:n.Input}],hideCaption:[{type:n.Input}],columnPicker:[{type:n.Input}],columnOrdering:[{type:n.Input}],linkTarget:[{type:n.Input}],linkKey:[{type:n.Input}],sortable:[{type:n.Input}],filterable:[{type:n.Input}],columnFiltering:[{type:n.Input}],localFilter:[{type:n.Input}],showFilterPlaceholders:[{type:n.Input}],localPaging:[{type:n.Input}],localPagingSize:[{type:n.Input}],localPagingOptions:[{type:n.Input}],showLocalPagingOptions:[{type:n.Input}],serverSideData:[{type:n.Input}],initialSort:[{type:n.Input}],rowStylingFunction:[{type:n.Input}],cellStylingFunction:[{type:n.Input}],childRows:[{type:n.Input}],childComponent:[{type:n.Input}],pageChange:[{type:n.Output}],filter:[{type:n.Input}],footer:[{type:n.Input}],tableEmptyMessage:[{type:n.Input}]},t}(),C=function(){function t(t){this.tableUtils=t}return t.prototype.transform=function(t,e,n,r,o,i){return n&&(o&&this.tableUtils.hasFilter(e)||i&&0<i.length)?this.tableUtils.filter(t,e,o,i):t},t.decorators=[{type:n.Pipe,args:[{name:"localfilter"}]}],t.ctorParameters=function(){return[{type:s}]},t}(),S=function(){function t(t,e,n){this.tableUtils=t,this.componentFactoryResolver=e,this.cdr=n}return t.prototype.ngAfterViewInit=function(){this.loadComponent()},t.prototype.retrieveCell=function(t,e){return this.tableUtils.retrieveCell(t,e)},t.prototype.loadComponent=function(){if(this.column.component){var t=this.retrieveCell(this.row,this.column),e=this.componentFactoryResolver.resolveComponentFactory(this.column.component),n=this.tableCellContentsDirective.viewContainerRef;n.clear();var r=n.createComponent(e);r.instance.data=t,r.instance.row=this.row}else this.noComponentContents=this.retrieveCell(this.row,this.column);this.cdr.detectChanges()},t.decorators=[{type:n.Component,args:[{selector:"shark-table-cell",template:'\n      <ng-container *ngIf="column.component">\n          <ng-template sharkDynamicContents></ng-template>\n      </ng-container>\n\n      <ng-container *ngIf="noComponentContents">\n          {{ noComponentContents }}\n      </ng-container>\n  '}]}],t.ctorParameters=function(){return[{type:s},{type:n.ComponentFactoryResolver},{type:n.ChangeDetectorRef}]},t.propDecorators={column:[{type:n.Input}],row:[{type:n.Input}],tableCellContentsDirective:[{type:n.ViewChild,args:[l]}]},t}(),v=function(){function t(t,e){this.router=t,this.tableUtils=e,this.openChildren=[]}return t.prototype.ngOnChanges=function(t){t.hasOwnProperty("page")&&!t.page.isFirstChange()&&(this.openChildren=[])},t.prototype.addStyleToCell=function(t,e){if(this.cellStylingFunction){var n=this.tableUtils.retrieveCell(t,e);return this.cellStylingFunction(t,e,n)}return null},t.prototype.childOpen=function(t){return-1<this.openChildren.indexOf(t)},t.prototype.toggleChild=function(t){-1<this.openChildren.indexOf(t)?this.openChildren.splice(this.openChildren.indexOf(t),1):this.openChildren.push(t),this.openChildren=this.openChildren.slice(0)},t.prototype.rowClick=function(t){this.linkTarget&&this.linkKey&&this.router.navigate([this.linkTarget,this.tableUtils.findValue(t,this.linkKey)])},t.decorators=[{type:n.Component,args:[{selector:"[shark-table-body]",template:'\n        <ng-container *ngIf="page.content && currentColumns.length > 0">\n          <ng-container *ngFor="let row of (page.content | localfilter:currentColumns:localFilter:localPaging:columnFiltering:filter); let e = even; let o = odd; let i = index;">\n            <tr class="data-row"\n                [ngClass]="{ odd: o, even: e, rowLink: linkTarget, rowOpen: childOpen(i) }"\n                [ngStyle]="rowStylingFunction(row)"\n                (click)="rowClick(row)" (keyup.enter)="rowClick(row)"\n                [attr.tabindex]="linkTarget ? 0 : null"\n            >\n                <td class="header-buttons" *ngIf="childRows">\n                  <button class="black-arrow fa fa-fw"\n                          [attr.aria-expanded]="childOpen(i)"\n                          [ngClass]="{ \'open\': childOpen(i), \'closed\': !childOpen(i), \'fa-caret-down\': childOpen(i), \'fa-caret-right\': !childOpen(i) }"\n                          (click)="toggleChild(i)" type="button" aria-label="Details Row"\n                  >\n                  </button>\n                </td>\n                <ng-container *ngFor="let column of currentColumns">\n                    <td [ngClass]="{\'right\': column.alignRight }" [ngStyle]="addStyleToCell(row, column)">\n                        <shark-table-cell [column]="column" [row]="row"></shark-table-cell>\n                    </td>\n                </ng-container>\n            </tr>\n            <tr *ngIf="childRows" class="data-row child-row" [ngClass]="{ odd: o, even: e, rowOpen: childOpen(i) }" [hidden]="!childOpen(i)">\n                <td></td>\n                <td [attr.colspan]="currentColumns.length">\n                    <shark-child [component]="childComponent" [row]="row" [rowIndex]="i" [openChildren]="openChildren"></shark-child>\n                </td>\n            </tr>\n          </ng-container>\n        </ng-container>\n        <ng-container *ngIf="currentColumns.length === 0">\n          <tr><td [attr.colspan]="childRows ? columns.length + 1 : columns.length">There are no columns selected</td></tr>\n        </ng-container>\n        <ng-container *ngIf="(!page.content || page.content.length == 0) && currentColumns.length > 0">\n          <tr><td [attr.colspan]="childRows ? currentColumns.length + 1 : currentColumns.length">{{ tableEmptyMessage }}</td></tr>\n        </ng-container>\n    '}]}],t.ctorParameters=function(){return[{type:r.Router},{type:s}]},t.propDecorators={currentColumns:[{type:n.Input}],columns:[{type:n.Input}],localFilter:[{type:n.Input}],localPaging:[{type:n.Input}],columnFiltering:[{type:n.Input}],filter:[{type:n.Input}],rowStylingFunction:[{type:n.Input}],cellStylingFunction:[{type:n.Input}],childRows:[{type:n.Input}],childComponent:[{type:n.Input}],linkTarget:[{type:n.Input}],linkKey:[{type:n.Input}],tableEmptyMessage:[{type:n.Input}],page:[{type:n.Input}]},t}(),w=function(){function t(){this.sortChange=new n.EventEmitter,this.ariaButtonLabel="Change Sorting"}return t.prototype.changeSort=function(){this.sortChange.emit({property:this.column.property,sortType:this.column.sortType})},t.decorators=[{type:n.Component,args:[{selector:"shark-table-header-button",template:'\n    <span class="header-text pointer" (click)="changeSort()" (keyup.enter)="changeSort()">{{ column.header }}</span>\n    <button class="sort-button" [name]="column.header" (click)="changeSort()" type="button"\n    [aria-label]="\'Change Sorting \' + column.header">\n      <i class="sorting fas fa-fw" [ngClass]="{\n        \'unsorted\': !column.sortType || column.sortType === 0,\n        \'fa-sort\': !column.sortType || column.sortType === 0,\n        \'asc\': column.sortType === 1,\n        \'fa-sort-up\': column.sortType === 1,\n        \'desc\': column.sortType === 2,\n        \'fa-sort-down\': column.sortType === 2\n      }"></i>\n    </button>\n  '}]}],t.ctorParameters=function(){return[]},t.propDecorators={column:[{type:n.Input}],sortChange:[{type:n.Output}]},t}(),P=function(){function t(){}return t.prototype.ngOnChanges=function(t){t.hasOwnProperty("notifierService")&&(this.notifierSubscription&&this.notifierSubscription.unsubscribe(),this.subscribeToNotifier())},t.prototype.ngOnDestroy=function(){this.notifierSubscription&&this.notifierSubscription.unsubscribe()},t.prototype.subscribeToNotifier=function(){var e=this;this.notifierSubscription=this.notifierService.messageObservable.subscribe(function(t){e.status=t,setTimeout(function(){return e.status=""},1e3)})},t.decorators=[{type:n.Component,args:[{selector:"shark-table-aria-notifier",template:'<div class="notification-area screen-reader" aria-atomic="true" aria-live="polite">{{ status }}</div>'}]}],t.ctorParameters=function(){return[]},t.propDecorators={notifierService:[{type:n.Input}]},t}(),I=function(){function t(){}return t.decorators=[{type:n.NgModule,args:[{imports:[e.CommonModule,o.FormsModule,r.RouterModule],declarations:[P,b,p,l,S,g,w,d,f,h,v,C,m],exports:[b,h],providers:[s]}]}],t.ctorParameters=function(){return[]},t}(),k=function(){};c.SharkChildComponent=p,c.SharkCurrentSort=u,c.SharkTableModule=I,c.SharkTableCellComponent=S,c.SharkTableComponent=b,c.SharkTablePaginationComponent=h,c.SharkTableUtils=s,c.SharkTableCurrentDataEvent=k,Object.defineProperty(c,"__esModule",{value:!0})});